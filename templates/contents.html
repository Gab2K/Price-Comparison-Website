{% extends 'main.html' %}
{% load static %}
{% block content %}

{#Navigation bar#}

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    body {
      font-family: "Lato", sans-serif;
    }
    
    .sidebar {
      height: 100%;
      width: 0;
      position: fixed;
      z-index: 1;
      top: 5;
      left: 0;
      background-color: #111;
      overflow-x: hidden;
      padding-top: 20px;
    }
    
    .sidebar a {
      padding: 6px 6px 6px 32px;
      text-decoration: none;
      font-size: 25px;
      color: #818181;
      display: block;
    }
    
    .sidebar a:hover {
      color: #f1f1f1;
    }
    
    @media screen and (max-height: 450px) {
      .sidenav {padding-top: 15px;}
      .sidenav a {font-size: 18px;}
      
    }

    .card{
      font-size:13px;
    }

    .btn-outline-secondary {
      color: #212529;
      background-color: #fff;
      border-color: #ABCCD8;
  }

  .btn-outline-secondary:hover {
    color: #212529;
    background-color: #66A1B8;
    border-color: #66A1B8;
}

#main {
  top: -50x;
}

.sidebar .closebtn {
  position: absolute;
  top: 0;
  right: 25px;
  font-size: 36px;
  margin-left: 50px;
}

.openbtn {
  font-size: 20px;
  cursor: pointer;
  background-color: #111;
  color: white;
  padding: 10px 15px;
  border: none;
}

.openbtn:hover {
  background-color: #444;
}


    </style>
    </head>
    <body>
      <div id = "main">
        <button class="openbtn" onclick="openNav()">☰</button>  
      </div>
    <div id="mySidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
      <form method "get" action = "{% url 'contents' %}">
      <div class = "control">
      
      {#Search box #}
      <h2>Item</h2>
      <input type="text" placeholder="Item" name="q">

      {# Stores #}
      <br><br><h2>Stores</h2>
      <input type="checkbox" name="Tesco" {%if Tesco %}checked="checked"{% endif %}>
      <label for="Tesco">Tesco</label><br>

      <input type="checkbox" name="Waitrose" {%if Waitrose %}checked="checked"{% endif %}>
      <label for="Waitrose">Waitrose</label><br></div>
      
      <input type="checkbox" name="Morrisons" {%if Morrisons %}checked="checked"{% endif %}>
      <label for="Waitrose">Morrisons</label><br>

      <input type="checkbox" name="Sainsburys" {%if Sainsburys %}checked="checked"{% endif %}>
      <label for="Sainsburys">Sainsbury's</label>

      {# Price #}

      <br><br><h2>Price</h2>

      <input type="text" placeholder = "Min" name="min_price" size = "1" maxlength = "5">
      <label for="lname">-</label>
      <input type="text" placeholder = "Max" name="max_price" size = "1" maxlength = "5"><br><br>
      <button type="submit">Apply</button></form>
    </div>
       
    
    
    <script>
    function openNav() {
      document.getElementById("mySidebar").style.width = "250px";
      document.getElementById("main").style.marginLeft = "250px";
    }
    
    function closeNav() {
      document.getElementById("mySidebar").style.width = "0";
      document.getElementById("main").style.marginLeft= "0";
    }
    </script>


    </body>


    {% include 'searchbar.html' %}
    <br><br>
    {#Dynamic data output#}
    <div class = "row">
      
      {% for product in products %}
      <div class="col-sm-3 my-4 card-deck">
      <div class="card">
        <br><br>
          <img class="card-img-top" src="{{product.imageURL}}" alt="Card image cap">
          <div class="card-body">
              <h6 class="card-title"><strong>{{product.store}}</strong></h6>
              <hr>
              <p class="card-text">{{product.name}}</p>
              <p class="card-text">{{product.weight}}</p>
          </div>
          <div class = "card-footer">
            <h5><strong>£{{product.price|floatformat:2}}</strong></h5>
            {% if product.id in items%}
            <button data-product = {{product.id}} data-action = "remove" class="btn btn-outline-secondary btn-sm add-btn update-cart">-</button>
            <p style="display: inline"><strong>{{items|get_item:product.id}}</strong></p>
            <button data-product = {{product.id}} data-action = "add" class="btn btn-outline-secondary btn-sm add-btn update-cart">+</button>
              {%else%}
              <button data-product = {{product.id}} data-action = "add" class="btn btn-outline-secondary btn-sm add-btn update-cart">Add To Basket</button>
              {%endif%}
          </div>
      </div>
    </div>
      {% endfor %}
	
</div>

{% endblock content %}